<!DOCTYPE html>
<html>
<head>
    <title>Redirect</title>
</head>
<body>
    <h1>Redirect to a link of your choice</h1>
	<a>You can use this to create custom redirect links.</br>
	<a>If left blank, it will redirect to this page.</p>

	<a>Create a link:</br>
	<input type="text" id="linkInput" placeholder="example.com">
    <button id="createLinkButton">Create link</button>
	<a></p>
	<a>Pair this with </a><a href="https://sheeptester.github.io/javascripts/obfuscate-url.html" target="_blank">URL Obfuscator</a><a> to make your links harder to read.</br>
	<a>(Use "barely" or "a bit" for a better result. Links will not be obfuscated on Discord)</a>
	
    <script>
        // get the current website link
        var currentUrl = window.location.href;

        // check if it's the default link
        if (currentUrl.includes('open-site.github.io/create/?')) {
            // split the text after the "?"
            var parts = currentUrl.split('?');

            // get the part after the "?" so it can redirect
            var redirectUrl = parts[1];

            // go to the link
            window.location.href = 'https://' + redirectUrl;
        }
		// get references to the input field and a message element
        const searchInput = document.getElementById('linkInput');
        const searchButton = document.getElementById('createLinkButton');

        // add an event listener to the button
        searchButton.addEventListener('click', () => {
            // get the value from the input field
            const redirectToLink = linkInput.value;

			var textarea = document.createElement('textarea');
            // check if the input field is not empty
            if (redirectToLink.trim() !== '') {
				textarea.value = 'https://open-site.github.io/to?' + redirectToLink;
				// append the textarea to the body
				document.body.appendChild(textarea);
				// select the text inside the textarea
				textarea.select();
				// copy the selected text to the clipboard
				document.execCommand('copy');
				// remove the textarea from the body
				document.body.removeChild(textarea);
				// show user input link
                alert(`Copied to clipboard:\n\nhttps:\/\/open-site.github.io/to?${redirectToLink}`);
            } else {
				textarea.value = 'https://open-site.github.io/to?example.com'
				// append the textarea to the body
				document.body.appendChild(textarea);
				// select the text inside the textarea
				textarea.select();
				// copy the selected text to the clipboard
				document.execCommand('copy');
				// remove the textarea from the body
				document.body.removeChild(textarea);
                // show example link
                alert('Copied to clipboard:\n\nhttps://open-site.github.io/to?example.com');
            }
        });
    </script>
</body>
</html>